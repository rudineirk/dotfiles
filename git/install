#!/bin/bash

dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
gitconfig_lib_path=~/.gitconfig.lib
gitignore_path=~/.gitignore

[ -e "$gitignore_path" ] && unlink "$gitignore_path"
ln -s "$dir/gitignore" "$gitignore_path"

[ -e "$gitconfig_lib_path" ] && unlink "$gitconfig_lib_path"
ln -s "$dir/gitconfig.lib" "$gitconfig_lib_path"

if [ -e ~/.gitconfig ]; then
    grep -q "$gitconfig_lib_path" ~/.gitconfig ||
        echo -e "\n[include]\n  path = $gitconfig_lib_path" \
        > ~/.gitconfig
else
    echo -e "\n[include]\n  path = $gitconfig_lib_path" > ~/.gitconfig
fi
